#+TITLE: Check the Feasibility of Equation Generated by Python
#+AUTHOR: Changyuan Lin
#+EMAIL: linchangyuan1996@gmail.com
#+Latex_header: \newcommand{\aDE}[4]{\begin{center}\begin{equation}\label{#4}\frac{{dy(t)}}{{dt}} -#1y(t) = #2u(t),y(0) = #3 \end{equation}\end{center}}

#+Name: par
#+Begin_src python :var input="0000777"
import numpy as np
a=np.arange(0.1,2,0.2)
b=np.arange(0.1,2,0.2)
Y_0=np.arange(0.1,5,0.5)
par=[round((a[eval(input[4])]),1),round(b[eval(input[5])],1),round(Y_0[eval(input[6])],1)]
return par
#+end_src

#+RESULTS: par
| 0.9 | 1.1 | 4.1 |

* Chapter 1
** Equation Generated by Python
Consider the differential equation given below.
#+Name: Generate_Equation1
#+Begin_src python :var texCommName="aDE" :var ParNum=3 :var par=par :var label="eq1" :results value raw :exports results
st="\(\\"+texCommName
for i in range(ParNum):
    st+="{"+str(par[i])+"}"
st+="{"+label+"}"
st+="\)"
return st
#+end_src

#+RESULTS: Generate_Equation1
** The Table Part

#+BEGIN_COMMENT
#+tblname: signal 
|  k | y |
|----+---|
|  0 | 2 |
|  2 | 2 |
|  2 | 4 |
|  4 | 4 |
|  6 | 4 |
|  6 | 3 |
|  8 | 3 |
|  8 | 2 |
| 10 | 8 |
#+TBLFM:
#+END_COMMENT

#+RESULTS:

#+Begin_src python :var fname="plot.png" :var signal=signal :results file :exports results
import matplotlib.pyplot as plt
k, y =zip(*signal)
fig = plt.figure()
axes = fig.add_subplot(1,1,1)
axes.plot(k, y, marker='o')
fig.savefig(fname)
return fname
#+end_src

   #+ATTR_LATEX: :width 2in :placement [!htpb]
   #+CAPTION: Reconstruct signal \(y(t)\).
   #+LABEL: FIG:fig2
   #+NAME: FIG:fig2
   #+RESULTS:
   [[file:plot.png]]

